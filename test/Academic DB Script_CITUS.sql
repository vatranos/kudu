SET search_path = citus;
/*
DROP TABLE AD_STUDENT_ATTENDANCE;
DROP TABLE AD_STUDENT_COURSE_DETAILS;
DROP TABLE AD_FACULTY_LOGIN_DETAILS;
DROP TABLE AD_FACULTY_COURSE_DETAILS;
DROP TABLE AD_EXAM_RESULTS;
DROP TABLE AD_EXAMS;
DROP TABLE AD_EXAM_TYPES;
DROP TABLE AD_FACULTY;
DROP TABLE AD_STUDENTS;
DROP TABLE AD_PARENT_INFORMATION;
DROP TABLE AD_COURSES;
DROP TABLE AD_ACADEMIC_SESSIONS;
DROP TABLE AD_DEPARTMENTS;
*/


CREATE TABLE AD_ACADEMIC_SESSIONS
(
  ID   		NUMERIC,
  NAME 		VARCHAR(50) NOT NULL
) ;

CREATE TABLE AD_DEPARTMENTS
  (
    ID         		NUMERIC ,
    NAME       		VARCHAR(50) NOT NULL,
    HEAD       		VARCHAR(50) NOT NULL
) ;

CREATE TABLE AD_PARENT_INFORMATION
  (
    ID   		NUMERIC,
    PARENT1_FN        	VARCHAR(50) NOT NULL,
    PARENT1_LN 		VARCHAR(50) NOT NULL,
    PARENT2_FN 		VARCHAR(50) ,
    PARENT2_LN 		VARCHAR(50)
  ) ;

CREATE TABLE AD_STUDENTS
  (
     ID            	NUMERIC ,
     FIRST_NAME         VARCHAR(50) NOT NULL ,
     LAST_NAME         	VARCHAR(50) NOT NULL ,
     REG_YEAR      	DATE NOT NULL,
     EMAIL		VARCHAR(50) NOT NULL,
     PARENT_ID          NUMERIC NOT NULL
  ) ;

CREATE TABLE AD_COURSES
  ( 
    ID       		NUMERIC,
    NAME      		VARCHAR (50) NOT NULL ,
    SESSION_ID      	NUMERIC  NOT NULL ,
    DEPT_ID          	NUMERIC ,
    LOGON_ID         	VARCHAR (10),
    PASSWORD         	VARCHAR (10) ,
    BUILDING		VARCHAR (50) ,
    ROOM		VARCHAR (20),
    DATE_TIME          	VARCHAR (20)
  ) ;


CREATE TABLE AD_FACULTY
  (
    ID        	        NUMERIC ,
    FIRST_NAME        	VARCHAR(50) NOT NULL ,
    LAST_NAME      	VARCHAR(50) NOT NULL,
    EMAIL          	VARCHAR(50) NOT NULL,
    SALARY           	NUMERIC,
    INSURANCE         	VARCHAR(20),
    HOURLY_RATE       	NUMERIC,
    DEPT_ID           	NUMERIC
  ) ;

CREATE TABLE AD_EXAM_TYPES
  (
    TYPE         	VARCHAR(50) ,
    NAME         	VARCHAR(50) NOT NULL ,
    DESCRIPTION      	VARCHAR(50)

  ) ;

CREATE TABLE AD_EXAMS
  (
    ID      		NUMERIC ,
    START_DATE   	DATE ,
    EXAM_TYPE    	VARCHAR(50) NOT NULL ,
    COURSE_ID    	NUMERIC  NOT NULL
   ) ;


CREATE TABLE AD_EXAM_RESULTS
  (
     STUDENT_ID        	NUMERIC ,
     COURSE_ID         	NUMERIC ,
     EXAM_ID           	NUMERIC ,
     EXAM_GRADE       	NUMERIC NOT NULL   
  ) ;


CREATE TABLE AD_STUDENT_ATTENDANCE
  (
     STUDENT_ID         NUMERIC ,
     SESSION_ID		NUMERIC ,
     NUM_WORK_DAYS   	NUMERIC NOT NULL,
     NUM_DAYS_OFF      	NUMERIC NOT NULL,
     EXAM_ELIGIBILITY 	VARCHAR(20) 
  ) ;



CREATE TABLE AD_STUDENT_COURSE_DETAILS
  (
     STUDENT_ID        	NUMERIC ,
     COURSE_ID        	NUMERIC ,
     GRADE		VARCHAR(2)NOT NULL
  ) ;


CREATE TABLE AD_FACULTY_COURSE_DETAILS
  (
     FACULTY_ID         NUMERIC ,
     COURSE_ID         	NUMERIC ,
     CONTACT_HRS        NUMERIC NOT NULL  
  ) ;


CREATE TABLE AD_FACULTY_LOGIN_DETAILS
  (
    FACULTY_ID        	NUMERIC ,
    LOGIN_DATE_TIME      TIMESTAMP NOT NULL
  ) ;


ALTER TABLE AD_ACADEMIC_SESSIONS ADD CONSTRAINT AD_ACADEMIC_SESSIONS_PK PRIMARY KEY ( ID ) ;

ALTER TABLE AD_ACADEMIC_SESSIONS ADD CONSTRAINT AD_SESSIONS_NAME_UK UNIQUE( NAME ) ;

ALTER TABLE AD_COURSES ADD CONSTRAINT AD_COURSES_PK PRIMARY KEY (ID) ;

ALTER TABLE AD_COURSES ADD CONSTRAINT AD_COURSES_NAME_UK UNIQUE(NAME);

ALTER TABLE AD_DEPARTMENTS ADD CONSTRAINT AD_DEPARTMENTS_PK PRIMARY KEY (ID ) ;

ALTER TABLE AD_DEPARTMENTS ADD CONSTRAINT AD_DEPT_NAME_UK UNIQUE( NAME ) ;

ALTER TABLE AD_EXAMS ADD CONSTRAINT AD_EXAMS_PK PRIMARY KEY ( ID ) ;

ALTER TABLE AD_EXAM_TYPES ADD CONSTRAINT AD_EXAM_TYPES_PK PRIMARY KEY ( TYPE ) ;

ALTER TABLE AD_EXAM_RESULTS ADD CONSTRAINT AD_EXAM_RESULTS_PK PRIMARY KEY ( STUDENT_ID, COURSE_ID, EXAM_ID );

ALTER TABLE AD_FACULTY ADD CONSTRAINT AD_FACULTY_PK PRIMARY KEY ( ID ) ;

ALTER TABLE AD_FACULTY ADD CONSTRAINT AD_FACULTY_EMAIL_UK UNIQUE( EMAIL ) ;

ALTER TABLE AD_PARENT_INFORMATION ADD CONSTRAINT AD_PARENT_INFORMATION_PK PRIMARY KEY ( ID ) ;

ALTER TABLE AD_STUDENTS ADD CONSTRAINT AD_STUDENTS_PK PRIMARY KEY ( ID ) ;

ALTER TABLE AD_STUDENTS ADD CONSTRAINT AD_STUDENTS_EMAIL_UK UNIQUE(EMAIL );

ALTER TABLE AD_STUDENT_ATTENDANCE ADD CONSTRAINT AD_STUDENT_ATTENDANCE_PK PRIMARY KEY ( STUDENT_ID, SESSION_ID) ;

ALTER TABLE AD_STUDENT_COURSE_DETAILS ADD CONSTRAINT AD_STUDENT_COURSE_PK PRIMARY KEY ( STUDENT_ID, COURSE_ID );

ALTER TABLE AD_FACULTY_COURSE_DETAILS ADD CONSTRAINT AD_FACULTY_COURSE_PK PRIMARY KEY ( FACULTY_ID, COURSE_ID ) ;

ALTER TABLE AD_FACULTY_LOGIN_DETAILS ADD CONSTRAINT AD_FACULTY_LOGIN_PK PRIMARY KEY ( FACULTY_ID, LOGIN_DATE_TIME );

ALTER TABLE AD_COURSES ADD CONSTRAINT AD_COURSES_FK1 FOREIGN KEY ( SESSION_ID ) REFERENCES AD_ACADEMIC_SESSIONS ( ID ) ;

ALTER TABLE AD_COURSES ADD CONSTRAINT AD_COURSES_FK2 FOREIGN KEY ( DEPT_ID ) REFERENCES AD_DEPARTMENTS ( ID ) ;

ALTER TABLE AD_EXAMS ADD CONSTRAINT AD_EXAMS_FK1 FOREIGN KEY ( EXAM_TYPE ) REFERENCES AD_EXAM_TYPES ( TYPE ) ;

ALTER TABLE AD_EXAMS ADD CONSTRAINT AD_EXAMS_FK2 FOREIGN KEY ( COURSE_ID ) REFERENCES AD_COURSES ( ID ) ;

ALTER TABLE AD_EXAM_RESULTS ADD CONSTRAINT AD_EXAM_RESULTS_FK1 FOREIGN KEY ( STUDENT_ID ) REFERENCES AD_STUDENTS ( ID ) ;

ALTER TABLE AD_EXAM_RESULTS ADD CONSTRAINT AD_EXAM_RESULTS_FK2 FOREIGN KEY ( COURSE_ID ) REFERENCES AD_COURSES ( ID ) ;

ALTER TABLE AD_EXAM_RESULTS ADD CONSTRAINT AD_EXAM_RESULT_FK3 FOREIGN KEY ( EXAM_ID ) REFERENCES AD_EXAMS ( ID ) ;

ALTER TABLE AD_FACULTY ADD CONSTRAINT AD_FACULTY_FK FOREIGN KEY ( DEPT_ID ) REFERENCES AD_DEPARTMENTS ( ID ) ;

ALTER TABLE AD_STUDENT_COURSE_DETAILS ADD CONSTRAINT AD_STUDENT_COURSE_FK1 FOREIGN KEY ( STUDENT_ID ) REFERENCES AD_STUDENTS ( ID ) ;

ALTER TABLE AD_STUDENT_COURSE_DETAILS ADD CONSTRAINT AD_STUDENT_COURSE_FK2 FOREIGN KEY ( COURSE_ID ) REFERENCES AD_COURSES ( ID ) ;

ALTER TABLE AD_STUDENTS ADD CONSTRAINT AD_STUDENTS_FK FOREIGN KEY ( PARENT_ID ) REFERENCES AD_PARENT_INFORMATION ( ID ) ;

ALTER TABLE AD_STUDENT_ATTENDANCE ADD CONSTRAINT AD_STUDENT_ATTENDANCE_FK1 FOREIGN KEY ( STUDENT_ID ) REFERENCES AD_STUDENTS (ID ) ;

ALTER TABLE AD_STUDENT_ATTENDANCE ADD CONSTRAINT AD_STUDENT_ATTENDANCE_FK2 FOREIGN KEY ( SESSION_ID ) REFERENCES AD_ACADEMIC_SESSIONS ( ID ) ;

ALTER TABLE AD_FACULTY_COURSE_DETAILS ADD CONSTRAINT AD_FACULTY_COURSE_FK1 FOREIGN KEY ( FACULTY_ID ) REFERENCES AD_FACULTY ( ID ) ;

ALTER TABLE AD_FACULTY_COURSE_DETAILS ADD CONSTRAINT AD_FACULTY_COURSE_FK2 FOREIGN KEY (  COURSE_ID ) REFERENCES AD_COURSES ( ID ) ;

ALTER TABLE AD_FACULTY_LOGIN_DETAILS ADD CONSTRAINT AD_FACULTY_LOGIN_FK FOREIGN KEY ( FACULTY_ID ) REFERENCES AD_FACULTY ( ID ) ;

ALTER TABLE AD_FACULTY_LOGIN_DETAILS ALTER COLUMN LOGIN_DATE_TIME TYPE TIMESTAMP;
ALTER TABLE AD_FACULTY_LOGIN_DETAILS ALTER COLUMN LOGIN_DATE_TIME SET DEFAULT current_timestamp;

-- ALTER TABLE AD_PARENT_INFORMATION READ ONLY;


INSERT INTO AD_ACADEMIC_SESSIONS VALUES (100, 'SPRING SESSION');
INSERT INTO AD_ACADEMIC_SESSIONS VALUES (200, 'FALL SESSION');
INSERT INTO AD_ACADEMIC_SESSIONS VALUES (300, 'SUMMER SESSION');

INSERT INTO AD_DEPARTMENTS VALUES(10, 'ACCOUNTING', 'MARK SMITH');
INSERT INTO AD_DEPARTMENTS VALUES(20, 'BIOLOGY', 'DAVE GOLD');
INSERT INTO AD_DEPARTMENTS VALUES(30, 'COMPUTER SCIENCE', 'LINDA BROWN');
INSERT INTO AD_DEPARTMENTS VALUES(40, 'LITERATURE', 'ANITA TAYLOR');

-- ALTER TABLE AD_PARENT_INFORMATION READ WRITE;

INSERT INTO AD_PARENT_INFORMATION VALUES(600,'NEIL', 'SMITH','DORIS', 'SMITH');
INSERT INTO AD_PARENT_INFORMATION VALUES(610,'WILLIAM', 'BEN','NITA', 'BEN');
INSERT INTO AD_PARENT_INFORMATION VALUES(620,'SEAN', 'TAYLOR','RHEA', 'TAYLOR');
INSERT INTO AD_PARENT_INFORMATION VALUES(630,'DAVE', 'CARMEN','CATHY', 'CARMEN');
INSERT INTO AD_PARENT_INFORMATION VALUES(640,'JOHN', 'AUDRY','JANE', 'AUDRY');

INSERT INTO AD_STUDENTS VALUES(720, 'JACK','SMITH', TO_DATE('01-Jan-2012','DD-Mon-YYYY'),'JSMITH@SCHOOL.EDU', 600);
INSERT INTO AD_STUDENTS VALUES(730, 'NOAH', 'AUDRY', TO_DATE('01-Jan-2012','DD-Mon-YYYY'),'NAUDRY@SCHOOL.EDU', 640);
INSERT INTO AD_STUDENTS VALUES(740, 'RHONDA','TAYLOR', TO_DATE('01-Sep-2012','DD-Mon-YYYY'),'RTAYLOR@SCHOOL.EDU', 620);
INSERT INTO AD_STUDENTS VALUES(750, 'ROBERT','BEN', TO_DATE('01-Mar-2012','DD-Mon-YYYY'),'RBEN@SCHOOL.EDU', 610);
INSERT INTO AD_STUDENTS VALUES(760, 'JEANNE','BEN', TO_DATE('01-Mar-2012','DD-Mon-YYYY'),'JBEN@SCHOOL.EDU', 610);
INSERT INTO AD_STUDENTS VALUES(770, 'MILLS','CARMEN', TO_DATE('01-Apr-2013','DD-Mon-YYYY'),'MCARMEN@SCHOOL.EDU', 630);

INSERT INTO AD_COURSES VALUES (190, 'PRINCIPLES OF ACCOUNTING', 100, 10,NULL,NULL,'BUILDING A','101','MWF 12-1');
INSERT INTO AD_COURSES VALUES (191, 'INTRODUCTION TO BUSINESS LAW', 100, 10,NULL,NULL,'BUILDING B','201','THUR 2-4');
INSERT INTO AD_COURSES VALUES (192, 'COST ACCOUNTING', 100, 10,NULL,NULL,'BUILDING C','301','TUES 5-7');
INSERT INTO AD_COURSES VALUES (193, 'STRATEGIC TAX PLANNING FOR BUSINESS', 100, 10,'TAX123','PASSWORD',NULL,NULL,NULL);
INSERT INTO AD_COURSES VALUES (194, 'GENERAL BIOLOGY', 200, 20,'BIO123','PASSWORD',NULL,NULL,NULL);
INSERT INTO AD_COURSES VALUES (195, 'CELL BIOLOGY', 200, 20,NULL,NULL,'BUILDING D','401','MWF 9-10');

INSERT INTO AD_FACULTY VALUES (800, 'JILL', 'MILLER','JMILL@SCHOOL.EDU',10000,'HEALTH',NULL,20);
INSERT INTO AD_FACULTY VALUES (810, 'JAMES', 'BORG','JBORG@SCHOOL.EDU',30000,'HEALTH,DENTAL',NULL,10);
INSERT INTO AD_FACULTY VALUES (820, 'LYNN', 'BROWN','LBROWN@SCHOOL.EDU',NULL,NULL,50,30);
INSERT INTO AD_FACULTY VALUES (830, 'ARTHUR', 'SMITH','ASMITH@SCHOOL.EDU',NULL,NULL,40,10);
INSERT INTO AD_FACULTY VALUES (840, 'SALLY', 'JONES','SJONES@SCHOOL.EDU',50000,'HEALTH,DENTAL,VISION',NULL,40);

INSERT INTO AD_EXAM_TYPES VALUES('MCE','Multiple Choice Exams','CHOOSE MORE THAN ONE ANSWER');
INSERT INTO AD_EXAM_TYPES VALUES('TF','TRUE AND FALSE Exams','CHOOSE EITHER TRUE OR FALSE');
INSERT INTO AD_EXAM_TYPES VALUES('FIB','FILL IN THE BLANKS Exams','TYPE IN THE CORRECT ANSWER');
INSERT INTO AD_EXAM_TYPES VALUES('ESS','ESSAY Exams','WRITE PARAGRAPHS');
INSERT INTO AD_EXAM_TYPES VALUES('SA','SHORT ANSWER Exams','WRITE SHORT ANSWERS');

INSERT INTO AD_EXAMS VALUES(500, TO_DATE('12-Sep-2013','DD-Mon-YYYY'),'MCE',190);
INSERT INTO AD_EXAMS VALUES(510, TO_DATE('15-Sep-2013','DD-Mon-YYYY'),'SA', 191);
INSERT INTO AD_EXAMS VALUES(520, TO_DATE('18-Sep-2013','DD-Mon -YYYY'),'FIB', 192);
INSERT INTO AD_EXAMS VALUES(530, TO_DATE('21-Mar-2014','DD-Mon -YYYY'),'ESS', 193);
INSERT INTO AD_EXAMS VALUES(540, TO_DATE('02-Apr-2014','DD-Mon-YYYY'),'TF', 194);

INSERT INTO AD_EXAM_RESULTS VALUES(720,190,500,91);
INSERT INTO AD_EXAM_RESULTS VALUES(720,193,520,97);
INSERT INTO AD_EXAM_RESULTS VALUES(730,195,540,87);
INSERT INTO AD_EXAM_RESULTS VALUES(730,194,530,85);
INSERT INTO AD_EXAM_RESULTS VALUES(750,192,500,60);
INSERT INTO AD_EXAM_RESULTS VALUES(750,195,510,97);
INSERT INTO AD_EXAM_RESULTS VALUES(750,191,520,78);
INSERT INTO AD_EXAM_RESULTS VALUES(760,192,540,65);
INSERT INTO AD_EXAM_RESULTS VALUES(760,191,530,60);
INSERT INTO AD_EXAM_RESULTS VALUES(760,192,510,70);

INSERT INTO AD_STUDENT_ATTENDANCE VALUES( 720,100, 180, 21,'Y');
INSERT INTO AD_STUDENT_ATTENDANCE VALUES( 730,200, 180, 11,'Y');
INSERT INTO AD_STUDENT_ATTENDANCE VALUES( 740,300, 180, 12,'Y');
INSERT INTO AD_STUDENT_ATTENDANCE VALUES( 750,100, 180, 14,'Y');
INSERT INTO AD_STUDENT_ATTENDANCE VALUES( 760,200, 180, 15,'Y');
INSERT INTO AD_STUDENT_ATTENDANCE VALUES( 770,300, 180, 13,'Y');

INSERT INTO AD_STUDENT_COURSE_DETAILS VALUES(720,190,'A');
INSERT INTO AD_STUDENT_COURSE_DETAILS VALUES(720,193,'B');
INSERT INTO AD_STUDENT_COURSE_DETAILS VALUES(730,191,'C');
INSERT INTO AD_STUDENT_COURSE_DETAILS VALUES(740,195,'F');
INSERT INTO AD_STUDENT_COURSE_DETAILS VALUES(750,192,'A');
INSERT INTO AD_STUDENT_COURSE_DETAILS VALUES(760,190,'B');
INSERT INTO AD_STUDENT_COURSE_DETAILS VALUES(760,192,'C');
INSERT INTO AD_STUDENT_COURSE_DETAILS VALUES(770,192,'D');
INSERT INTO AD_STUDENT_COURSE_DETAILS VALUES(770,193,'F');
INSERT INTO AD_STUDENT_COURSE_DETAILS VALUES(770,194,'A');

INSERT INTO AD_FACULTY_COURSE_DETAILS VALUES (800, 192,3);
INSERT INTO AD_FACULTY_COURSE_DETAILS VALUES (800, 193,4);
INSERT INTO AD_FACULTY_COURSE_DETAILS VALUES (800, 190,5);
INSERT INTO AD_FACULTY_COURSE_DETAILS VALUES (800, 191,3);
INSERT INTO AD_FACULTY_COURSE_DETAILS VALUES (810, 194,4);
INSERT INTO AD_FACULTY_COURSE_DETAILS VALUES (810, 195,5);

INSERT INTO AD_FACULTY_LOGIN_DETAILS VALUES(800,DEFAULT);
INSERT INTO AD_FACULTY_LOGIN_DETAILS VALUES(810, DEFAULT);
INSERT INTO AD_FACULTY_LOGIN_DETAILS VALUES(840, DEFAULT);
INSERT INTO AD_FACULTY_LOGIN_DETAILS VALUES(820, DEFAULT);
INSERT INTO AD_FACULTY_LOGIN_DETAILS VALUES(830, DEFAULT);

ALTER TABLE AD_FACULTY_LOGIN_DETAILS 
ADD  DETAILS  VARCHAR(50);

